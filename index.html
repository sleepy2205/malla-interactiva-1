<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Interactiva Medicina</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      background-color: #ffe4ec;
      font-family: 'Quicksand', sans-serif;
      color: #333;
      margin: 0;
      padding: 20px;
      background-image: url('https://www.transparenttextures.com/patterns/white-fibers.png');
    }
    h1 {
      text-align: center;
      font-size: 2.2em;
      font-weight: 600;
      margin-top: 20px;
      margin-bottom: 15px;
      background-image: linear-gradient(to right, #f48fb1, #f06292);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    #personaje-container {
      text-align: center;
      margin-bottom: 15px;
    }

    #personaje-img {
      width: 100px;
      max-height: 100px;
      object-fit: contain;
      opacity: 0.95;
      display: inline-block;
      transition: 0.3s ease;
    }
  </style>
</head>
<body>
  <div id="personaje-container">
    <img id="personaje-img" src="https://i.imgur.com/6XJcoCE.png" alt="Hello Kitty doctora" />
  </div>

  <h1>üíï Plan de Estudio Medicina UNITEC üíâ</h1>

  <div id="contador">Cr√©ditos Completados: 0 / 347</div>
  <button id="reiniciar">Reiniciar progreso</button>
  <div id="contenedor">
    <div id="grupo-1"><h2>üìò Primer A√±o - Primer Periodo</h2><div class="clases"></div></div>
    <div id="grupo-2"><h2>üìò Primer A√±o - Segundo Periodo</h2><div class="clases"></div></div>
    <div id="grupo-3"><h2>üìò Primer A√±o - Tercer Periodo</h2><div class="clases"></div></div>
    <div id="grupo-4"><h2>üìò Primer A√±o - Cuarto Periodo</h2><div class="clases"></div></div>

    <div id="grupo-5"><h2>üìò Segundo A√±o - Quinto Periodo</h2><div class="clases"></div></div>
    <div id="grupo-6"><h2>üìò Segundo A√±o - Sexto Periodo</h2><div class="clases"></div></div>
    <div id="grupo-7"><h2>üìò Segundo A√±o - S√©ptimo Periodo</h2><div class="clases"></div></div>
    <div id="grupo-8"><h2>üìò Segundo A√±o - Octavo Periodo</h2><div class="clases"></div></div>

    <div id="grupo-9"><h2>üìò Tercer A√±o - Noveno Periodo</h2><div class="clases"></div></div>
    <div id="grupo-10"><h2>üìò Tercer A√±o - D√©cimo Periodo</h2><div class="clases"></div></div>
    <div id="grupo-11"><h2>üìò Tercer A√±o - Und√©cimo Periodo</h2><div class="clases"></div></div>
    <div id="grupo-12"><h2>üìò Tercer A√±o - Duod√©cimo Periodo</h2><div class="clases"></div></div>

    <div id="grupo-13"><h2>üìò Cuarto A√±o - Decimotercer Periodo</h2><div class="clases"></div></div>
    <div id="grupo-14"><h2>üìò Cuarto A√±o - Decimocuarto Periodo</h2><div class="clases"></div></div>
    <div id="grupo-15"><h2>üìò Cuarto A√±o - Decimoquinto Periodo</h2><div class="clases"></div></div>
    <div id="grupo-16"><h2>üìò Cuarto A√±o - Decimosexto Periodo</h2><div class="clases"></div></div>

    <div id="grupo-17"><h2>üìò Quinto A√±o - Decimos√©ptimo Periodo</h2><div class="clases"></div></div>
    <div id="grupo-18"><h2>üìò Quinto A√±o - Decimoctavo Periodo</h2><div class="clases"></div></div>
    <div id="grupo-19"><h2>üìò Quinto A√±o - Decimonoveno Periodo</h2><div class="clases"></div></div>
    <div id="grupo-20"><h2>üìò Quinto A√±o - Vig√©simo Periodo</h2><div class="clases"></div></div>

    <div id="grupo-21"><h2>üìò Sexto A√±o - Vig√©simo Primer Periodo</h2><div class="clases"></div></div>
    <div id="grupo-22"><h2>üìò Sexto A√±o - Vig√©simo Segundo Periodo</h2><div class="clases"></div></div>
    <div id="grupo-23"><h2>üìò Sexto A√±o - Vig√©simo Tercer Periodo</h2><div class="clases"></div></div>
    <div id="grupo-24"><h2>üìò Sexto A√±o - Vig√©simo Cuarto Periodo</h2><div class="clases"></div></div>

    <div id="grupo-25"><h2>üìò S√©ptimo A√±o - Periodos 25 a 27</h2><div class="clases"></div></div>
  </div>

<script>
  // Datos clases adaptados con # cr√©ditos y requisitos
  const datos = [
    // Primer a√±o - Periodo 1
    { codigo: "MAT101", nombre: "Introducci√≥n al √°lgebra", creditos: 4 },
    { codigo: "MDE109", nombre: "Desarrollo humano y social", creditos: 4 },
    { codigo: "MDE110", nombre: "Procesos celulares y moleculares 1", creditos: 3 },
    { codigo: "MDE111", nombre: "Estructura y funci√≥n 1", creditos: 4 },

    // Primer a√±o - Periodo 2
    { codigo: "MAT102", nombre: "Algebra", creditos: 4, req: ["MAT101"] },
    { codigo: "MDE112", nombre: "Estilo de vida, salud y medio ambiente", creditos: 4 },
    { codigo: "MDE113", nombre: "Procesos celulares y moleculares 2", creditos: 3, req: ["MDE110"] },
    { codigo: "MDE114", nombre: "Estructura y funci√≥n 2", creditos: 4, req: ["MDE111"] },

    // Primer a√±o - Periodo 3
    { codigo: "MDE115", nombre: "Bases de la terap√©utica medicamentosa", creditos: 4, req: ["MDE113"] },
    { codigo: "MDE116", nombre: "Procesos celulares y moleculares 3", creditos: 3, req: ["MDE113"] },
    { codigo: "MDE117", nombre: "SO 1 - Circulaci√≥n, respiraci√≥n, excreci√≥n y equilibrio √°cido-b√°sico 1", creditos: 4, req: ["MDE114"] },
    { codigo: "MDE203", nombre: "Pr√°cticas m√©dicas 1", creditos: 4, req: ["MDE113", "MDE114"] },

    // Primer a√±o - Periodo 4
    { codigo: "ESP103", nombre: "Comunicaci√≥n oral y escrita", creditos: 4 },
    { codigo: "MDE118", nombre: "Mecanismos de agresi√≥n y defensa 1", creditos: 4, req: ["MDE116"] },
    { codigo: "MDE119", nombre: "SO 1 - Circulaci√≥n, respiraci√≥n, excreci√≥n y equilibrio √°cido-b√°sico 2", creditos: 4, req: ["MDE117"] },
    { codigo: "MDE216", nombre: "Pr√°cticas m√©dicas 2", creditos: 4, req: ["MDE203"] },

    // Segundo a√±o - Periodo 5
    { codigo: "ING105/EIEA1", nombre: "Ingl√©s 1 / Electiva de idioma extranjero 1", creditos: 3 },
    { codigo: "MDE217", nombre: "Mecanismos de agresi√≥n y defensa 2", creditos: 4, req: ["MDE118"] },
    { codigo: "MDE218", nombre: "SO 2 - Digesti√≥n y absorci√≥n, reproducci√≥n y control endocrino 1", creditos: 4 },
    { codigo: "MDE219", nombre: "Pr√°cticas m√©dicas 3", creditos: 4, req: ["MDE216"] },

    // Segundo a√±o - Periodo 6
    { codigo: "ING106/EIEA2", nombre: "Ingl√©s 2 / Electiva de idioma extranjero 2", creditos: 3, req: ["ING105/EIEA1"] },
    { codigo: "MDE220", nombre: "Mecanismos de agresi√≥n y defensa 3", creditos: 4, req: ["MDE217"] },
    { codigo: "MDE221", nombre: "SO 2 - Digesti√≥n y absorci√≥n, reproducci√≥n y control endocrino 2", creditos: 4, req: ["MDE218"] },
    { codigo: "MDE222", nombre: "Pr√°cticas m√©dicas 4", creditos: 4, req: ["MDE219"] },

    // Segundo a√±o - Periodo 7
    { codigo: "ING107/EIEA3", nombre: "Ingl√©s 3 / Electiva de idioma extranjero 3", creditos: 3, req: ["ING106/EIEA2"] },
    { codigo: "MDE223", nombre: "Mecanismos de agresi√≥n y defensa 4", creditos: 4, req: ["MDE220"] },
    { codigo: "MDE224", nombre: "SO 3 - Soporte, locomoci√≥n y control neural 1", creditos: 4 },
    { codigo: "MDE225", nombre: "Pr√°cticas m√©dicas 5", creditos: 4, req: ["MDE222"] },

    // Segundo a√±o - Periodo 8
    { codigo: "ING108/EIEA4", nombre: "Ingl√©s 4 / Electiva de idioma extranjero 4", creditos: 3, req: ["ING107/EIEA3"] },
    { codigo: "MDE226", nombre: "Neurociencias y comportamiento", creditos: 4 },
    { codigo: "MDE227", nombre: "SO 3 - Soporte, locomoci√≥n y control neural 2", creditos: 4, req: ["MDE224"] },
    { codigo: "MDE228", nombre: "Pr√°cticas m√©dicas 6", creditos: 4, req: ["MDE225"] },

    // Tercer a√±o - Periodo 9
    { codigo: "ING109/EIEB1", nombre: "Ingl√©s 5 / Electiva de idioma extranjero 1", creditos: 3, req: ["ING108/EIEA4"] },
    { codigo: "MDE315", nombre: "Salud infantil y del adolescente", creditos: 5 },
    { codigo: "MDE316", nombre: "Salud de la mujer", creditos: 5 },
    { codigo: "MDE317", nombre: "Cl√≠nica integrada 1", creditos: 3 },

    // Tercer a√±o - Periodo 10
    { codigo: "ING110/EIEB2", nombre: "Ingl√©s 6 / Electiva de idioma extranjero 2", creditos: 3, req: ["ING109/EIEB1"] },
    { codigo: "MDE318", nombre: "Sistemas de salud", creditos: 4 },
    { codigo: "MDE319", nombre: "Salud del adulto", creditos: 5 },
    { codigo: "MDE320", nombre: "Cl√≠nica integrada 2", creditos: 3, req: ["MDE317"] },

    // Tercer a√±o - Periodo 11
    { codigo: "ING111/EIEB3", nombre: "Ingl√©s 7 / Electiva de idioma extranjero 3", creditos: 3, req: ["ING110/EIEB2"] },
    { codigo: "MDE321", nombre: "Prevenci√≥n y promoci√≥n de la salud 1", creditos: 4 },
    { codigo: "MDE322", nombre: "Salud del adulto mayor", creditos: 5 },
    { codigo: "MDE323", nombre: "Cl√≠nica integrada 3", creditos: 3, req: ["MDE320"] },

    // Tercer a√±o - Periodo 12
    { codigo: "ING112/EIEB4", nombre: "Ingl√©s 8 / Electiva de idioma extranjero 4", creditos: 3, req: ["ING111/EIEB3"] },
    { codigo: "MDE324", nombre: "Prevenci√≥n y promoci√≥n de la salud 2", creditos: 4, req: ["MDE321"] },
    { codigo: "MDE325", nombre: "Salud mental", creditos: 5 },
    { codigo: "MDE326", nombre: "Cl√≠nica integrada 4", creditos: 3, req: ["MDE323"] },

    // Cuarto a√±o - Periodo 13
    { codigo: "LCC104", nombre: "Ofim√°tica avanzada", creditos: 2 },
    { codigo: "MDE407", nombre: "Medicina interna 1", creditos: 5 },
    { codigo: "MDE408", nombre: "Pediatr√≠a 1", creditos: 5 },
    { codigo: "BMD429", nombre: "Tecnolog√≠as biom√©dicas 1", creditos: 3 },

    // Cuarto a√±o - Periodo 14
    { codigo: "SOC101", nombre: "Sociolog√≠a", creditos: 3 },
    { codigo: "MDE409", nombre: "Cirug√≠a 1", creditos: 5 },
    { codigo: "MDE410", nombre: "Ginecolog√≠a y obstetricia 1", creditos: 5 },

    // Cuarto a√±o - Periodo 15
    { codigo: "FIL101", nombre: "Filosof√≠a", creditos: 3 },
    { codigo: "MDE411", nombre: "Urgencias y emergencias 1", creditos: 5 },
    { codigo: "MDE412", nombre: "Seminarios integradores 1", creditos: 3 },

    // Cuarto a√±o - Periodo 16
    { codigo: "MDE413", nombre: "Medicina interna 2", creditos: 5 },
    { codigo: "MDE414", nombre: "Pediatr√≠a 2", creditos: 5 },
    { codigo: "MDE415", nombre: "Seminarios integradores 2", creditos: 3 },

    // Quinto a√±o - Periodo 17
    { codigo: "MDE511", nombre: "Cirug√≠a 2", creditos: 6 },
    { codigo: "MDE512", nombre: "Medicina 3", creditos: 6 },
    { codigo: "MDE513", nombre: "Cl√≠nica quir√∫rgica 1", creditos: 4 },

    // Quinto a√±o - Periodo 18
    { codigo: "MDE514", nombre: "Pediatr√≠a 3", creditos: 5 },
    { codigo: "MDE515", nombre: "Cl√≠nica m√©dica 1", creditos: 6 },

    // Quinto a√±o - Periodo 19
    { codigo: "MDE516", nombre: "Salud p√∫blica avanzada", creditos: 4 },

    // Quinto a√±o - Periodo 20
    { codigo: "MDE517", nombre: "Medicina legal y forense", creditos: 3 },

    // Sexto a√±o - Periodo 21
    { codigo: "MDE621", nombre: "Internado rural", creditos: 12 },

    // Sexto a√±o - Periodo 22
    { codigo: "MDE622", nombre: "Internado hospitalario 1", creditos: 12 },

    // Sexto a√±o - Periodo 23
    { codigo: "MDE623", nombre: "Internado hospitalario 2", creditos: 12 },

    // Sexto a√±o - Periodo 24
    { codigo: "MDE624", nombre: "Internado comunitario", creditos: 12 },

    // S√©ptimo a√±o - Periodo 25 a 27
    { codigo: "MDE701", nombre: "Rotaci√≥n electiva 1", creditos: 4 },
    { codigo: "MDE702", nombre: "Rotaci√≥n electiva 2", creditos: 4 },
    { codigo: "MDE703", nombre: "Rotaci√≥n electiva 3", creditos: 4 },
  ];

  const contenedor = document.getElementById("contenedor");
  const completadas = JSON.parse(localStorage.getItem("completadas") || "[]");

  datos.forEach((clase, i) => {
    const div = document.createElement("div");
    div.className = "clase";
    div.innerHTML = `
      <div class="codigo">${clase.codigo}</div>
      <div>${clase.nombre}</div>
      <div class="uv"># de cr√©ditos (c): ${clase.creditos}</div>
      <div class="req">${clase.req ? `Requiere: ${clase.req.join(', ')}` : ""}</div>
    `;
    div.dataset.codigo = clase.codigo;

    // Asignar grupo por √≠ndice para distribuir en periodos
    // Hay 25 grupos, distribuidos 4 periodos x 4 a√±os + 4 periodos extras + a√±os extras
    // Aqu√≠ simple, asigno seg√∫n i para los grupos (ajusta seg√∫n tus periodos)
    let grupoIndex = 1;
    if (i < 4) grupoIndex = 1;
    else if (i < 8) grupoIndex = 2;
    else if (i < 12) grupoIndex = 3;
    else if (i < 16) grupoIndex = 4;
    else if (i < 20) grupoIndex = 5;
    else if (i < 24) grupoIndex = 6;
    else if (i < 28) grupoIndex = 7;
    else if (i < 32) grupoIndex = 8;
    else if (i < 36) grupoIndex = 9;
    else if (i < 40) grupoIndex = 10;
    else if (i < 44) grupoIndex = 11;
    else if (i < 48) grupoIndex = 12;
    else if (i < 52) grupoIndex = 13;
    else if (i < 56) grupoIndex = 14;
    else if (i < 60) grupoIndex = 15;
    else if (i < 64) grupoIndex = 16;
    else if (i < 67) grupoIndex = 17;
    else if (i < 69) grupoIndex = 18;
    else if (i < 70) grupoIndex = 19;
    else if (i < 71) grupoIndex = 20;
    else if (i < 72) grupoIndex = 21;
    else if (i < 73) grupoIndex = 22;
    else if (i < 74) grupoIndex = 23;
    else if (i < 75) grupoIndex = 24;
    else grupoIndex = 25;

    document.querySelector(`#grupo-${grupoIndex} .clases`).appendChild(div);
  });

  const clasesDOM = document.querySelectorAll(".clase");

  function actualizarActivas() {
    clasesDOM.forEach(div => {
      const codigo = div.dataset.codigo;
      const clase = datos.find(c => c.codigo === codigo);
      if (!clase.req || clase.req.every(r => completadas.includes(r))) {
        div.classList.add("activa");
      } else {
        div.classList.remove("activa");
      }
    });
  }

  function actualizarContador() {
    let total = completadas.reduce((sum, codigo) => {
      const clase = datos.find(c => c.codigo === codigo);
      return sum + (clase ? clase.creditos : 0);
    }, 0);
    document.getElementById("contador").textContent = `Cr√©ditos Completados: ${total} / 347`;
  }

  clasesDOM.forEach(div => {
    const codigo = div.dataset.codigo;
    if (completadas.includes(codigo)) {
      div.classList.add("completada");
    }
    div.addEventListener("click", () => {
      if (!div.classList.contains("activa") && !div.classList.contains("completada")) return;
      if (div.classList.contains("completada")) {
        div.classList.remove("completada");
        const index = completadas.indexOf(codigo);
        if (index > -1) completadas.splice(index, 1);
      } else {
        div.classList.add("completada");
        completadas.push(codigo);
      }
      localStorage.setItem("completadas", JSON.stringify(completadas));
      actualizarActivas();
      actualizarContador();
    });
  });

  actualizarActivas();
  actualizarContador();

  document.getElementById("reiniciar").addEventListener("click", () => {
    if (confirm("¬øEst√°s segura de que quieres reiniciar tu progreso?")) {
      localStorage.removeItem("completadas");
      location.reload();
    }
  });

  // Im√°genes Hello Kitty por grupo (puedes cambiar URLs a otras im√°genes que prefieras)
  const imagenesPorGrupo = {
    1: "https://i.imgur.com/LdDbk5W.png",  // Hello Kitty m√©dica
    2: "https://i.imgur.com/Vmj8nXE.png",  // Hello Kitty con libro
    3: "https://i.imgur.com/nWysPip.png",  // Hello Kitty con bata blanca
    4: "https://i.imgur.com/nWysPip.png",
    5: "https://i.imgur.com/8T8mrTa.png",  // Hello Kitty cirujana
    6: "https://i.imgur.com/8T8mrTa.png",
    7: "https://i.imgur.com/NfNmfPi.png",  // Hello Kitty interna
    8: "https://i.imgur.com/NfNmfPi.png",
    9: "https://i.imgur.com/qPe78Ee.png",  // Hello Kitty graduada m√©dica
    10: "https://i.imgur.com/qPe78Ee.png",
    11: "https://i.imgur.com/JGqA3eE.png", // Hello Kitty mochilera m√©dica
    12: "https://i.imgur.com/JGqA3eE.png",
    13: "https://i.imgur.com/JGqA3eE.png",
    14: "https://i.imgur.com/JGqA3eE.png",
    15: "https://i.imgur.com/JGqA3eE.png",
    16: "https://i.imgur.com/JGqA3eE.png",
    17: "https://i.imgur.com/JGqA3eE.png",
    18: "https://i.imgur.com/JGqA3eE.png",
    19: "https://i.imgur.com/JGqA3eE.png",
    20: "https://i.imgur.com/JGqA3eE.png",
    21: "https://i.imgur.com/JGqA3eE.png",
    22: "https://i.imgur.com/JGqA3eE.png",
    23: "https://i.imgur.com/JGqA3eE.png",
    24: "https://i.imgur.com/JGqA3eE.png",
    25: "https://i.imgur.com/JGqA3eE.png"
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const grupoId = entry.target.id.split("-")[1];
        const imgSrc = imagenesPorGrupo[grupoId] || imagenesPorGrupo[1];
        document.getElementById("personaje-img").src = imgSrc;
      }
    });
  }, { threshold: 0.5 });

  document.querySelectorAll('[id^="grupo-"]').forEach(grupo => observer.observe(grupo));
</script>
</body>
</html>
