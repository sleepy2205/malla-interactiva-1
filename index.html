<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üéÄ Plan de estudio medicina UNITEC ü©∫</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@1,700&display=swap');

    body {
      font-family: 'Comic Neue', cursive;
      background: #fff0f6;
      margin: 0;
      padding: 1rem;
      color: #d6006e;
      background-image: url('https://i.pinimg.com/originals/f9/34/4e/f9344eae6e0f41d765d1a4b17aa77514.jpg');
      background-size: 150px;
      background-repeat: repeat;
    }

    h1, h2 {
      color: #d6006e;
      text-shadow: 1px 1px 2px #fff;
      text-align: center;
    }

    .periodo {
      margin-bottom: 2rem;
    }

    .clase {
      background: #ffe6f1;
      border: 2px dashed #ff69b4;
      border-radius: 1rem;
      padding: 1rem;
      margin: 0.5rem 0;
      box-shadow: 0 3px 6px rgba(255, 105, 180, 0.3);
      cursor: pointer;
      transition: transform 0.2s;
      position: relative;
      user-select: none;
    }

    .clase:hover {
      transform: scale(1.03);
      background-color: #ffd6ea;
    }

    .completada {
      text-decoration: line-through;
      opacity: 0.5;
      background-color: #fdddf0;
    }

    .bloqueada {
      pointer-events: none;
      opacity: 0.3;
    }

    #uv-total {
      font-size: 1.2rem;
      font-weight: bold;
      margin: 1rem 0;
      color: #cc0077;
      text-align: center;
    }

    button {
      background: #ff69b4;
      color: white;
      border: none;
      border-radius: 1rem;
      padding: 0.6rem 1.2rem;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      box-shadow: 0 2px 5px rgba(255, 20, 147, 0.4);
      display: block;
      margin: 1rem auto;
      user-select: none;
    }

    button:hover {
      background: #ff1493;
    }

    .clase::before {
      content: "ü©∫ ";
      position: absolute;
      left: -1.5rem;
      font-size: 1.2rem;
    }

    .anio-imagen {
      text-align: center;
      margin: 1rem 0;
    }

    .anio-imagen img {
      max-width: 120px;
      height: auto;
    }
  </style>
</head>
<body>
  <h1>üéÄ Plan de estudio medicina UNITEC ü©∫</h1>
  <div id="uv-total">Cr√©ditos completados: 0 / 347</div>
  <button onclick="reiniciar()">Reiniciar progreso</button>
  <div id="contenedor-malla"></div>

  <script>
    // Datos de la malla, solo objetos JS, sin HTML
    const clases = [
      // A√±o 1
      {
        periodo: "1. Per√≠odo 1",
        anio: 1,
        clases: [
          { codigo: "MAT101", nombre: "Introducci√≥n al √°lgebra", creditos: 4, requisitos: [] },
          { codigo: "MDE109", nombre: "Desarrollo humano y social", creditos: 4, requisitos: [] },
          { codigo: "MDE110", nombre: "Procesos celulares y moleculares 1", creditos: 3, requisitos: [] },
          { codigo: "MDE111", nombre: "Estructura y funci√≥n 1", creditos: 4, requisitos: [] }
        ]
      },
      {
        periodo: "2. Per√≠odo 2",
        anio: 1,
        clases: [
          { codigo: "MAT102", nombre: "√Ålgebra", creditos: 4, requisitos: ["MAT101"] },
          { codigo: "MDE112", nombre: "Estilo de vida, salud y medio ambiente", creditos: 4, requisitos: [] },
          { codigo: "MDE113", nombre: "Procesos celulares y moleculares 2", creditos: 3, requisitos: ["MDE110"] },
          { codigo: "MDE114", nombre: "Estructura y funci√≥n 2", creditos: 4, requisitos: ["MDE111"] }
        ]
      },
      {
        periodo: "3. Per√≠odo 3",
        anio: 1,
        clases: [
          { codigo: "MDE115", nombre: "Bases de la terap√©utica medicamentosa", creditos: 4, requisitos: ["MDE113"] },
          { codigo: "MDE116", nombre: "Procesos celulares y moleculares 3", creditos: 3, requisitos: ["MDE113"] },
          { codigo: "MDE117", nombre: "SO 1 - Circulaci√≥n, respiraci√≥n, excreci√≥n y equilibrio √°cido-b√°sico 1", creditos: 4, requisitos: ["MDE114"] },
          { codigo: "MDE203", nombre: "Pr√°cticas m√©dicas 1", creditos: 4, requisitos: ["MDE113", "MDE114"] }
        ]
      },
      {
        periodo: "4. Per√≠odo 4",
        anio: 1,
        clases: [
          { codigo: "ESP103", nombre: "Comunicaci√≥n oral y escrita", creditos: 4, requisitos: [] },
          { codigo: "MDE118", nombre: "Mecanismos de agresi√≥n y defensa 1", creditos: 4, requisitos: ["MDE116"] },
          { codigo: "MDE119", nombre: "SO 1 - Circulaci√≥n, respiraci√≥n, excreci√≥n y equilibrio √°cido-b√°sico 2", creditos: 4, requisitos: ["MDE117"] },
          { codigo: "MDE216", nombre: "Pr√°cticas m√©dicas 2", creditos: 4, requisitos: ["MDE203"] }
        ]
      },

      // A√±o 2
      {
        periodo: "5. Per√≠odo 5",
        anio: 2,
        clases: [
          { codigo: "ING105/EIEA1", nombre: "Ingl√©s 1 / Electiva de idioma extranjero 1", creditos: 3, requisitos: [] },
          { codigo: "MDE217", nombre: "Mecanismos de agresi√≥n y defensa 2", creditos: 4, requisitos: ["MDE118"] },
          { codigo: "MDE218", nombre: "SO 2 - Digesti√≥n y absorci√≥n, reproducci√≥n y control endocrino 1", creditos: 4, requisitos: [] },
          { codigo: "MDE219", nombre: "Pr√°cticas m√©dicas 3", creditos: 4, requisitos: ["MDE216"] }
        ]
      },
      {
        periodo: "6. Per√≠odo 6",
        anio: 2,
        clases: [
          { codigo: "ING106/EIEA2", nombre: "Ingl√©s 2 / Electiva de idioma extranjero 2", creditos: 3, requisitos: ["ING105/EIEA1"] },
          { codigo: "MDE220", nombre: "Mecanismos de agresi√≥n y defensa 3", creditos: 4, requisitos: ["MDE217"] },
          { codigo: "MDE221", nombre: "SO 2 - Digesti√≥n y absorci√≥n, reproducci√≥n y control endocrino 2", creditos: 4, requisitos: ["MDE218"] },
          { codigo: "MDE222", nombre: "Pr√°cticas m√©dicas 4", creditos: 4, requisitos: ["MDE219"] }
        ]
      },
      {
        periodo: "7. Per√≠odo 7",
        anio: 2,
        clases: [
          { codigo: "ING107/EIEA3", nombre: "Ingl√©s 3 / Electiva de idioma extranjero 3", creditos: 3, requisitos: ["ING106/EIEA2"] },
          { codigo: "MDE223", nombre: "Mecanismos de agresi√≥n y defensa 4", creditos: 4, requisitos: ["MDE220"] },
          { codigo: "MDE224", nombre: "SO 3 - Soporte, locomoci√≥n y control neural 1", creditos: 4, requisitos: [] },
          { codigo: "MDE225", nombre: "Pr√°cticas m√©dicas 5", creditos: 4, requisitos: ["MDE222"] }
        ]
      },
      {
        periodo: "8. Per√≠odo 8",
        anio: 2,
        clases: [
          { codigo: "ING108/EIEA4", nombre: "Ingl√©s 4 / Electiva de idioma extranjero 4", creditos: 3, requisitos: ["ING107/EIEA3"] },
          { codigo: "MDE226", nombre: "Neurociencias y comportamiento", creditos: 4, requisitos: [] },
          { codigo: "MDE227", nombre: "SO 3 - Soporte, locomoci√≥n y control neural 2", creditos: 4, requisitos: ["MDE224"] },
          { codigo: "MDE228", nombre: "Pr√°cticas m√©dicas 6", creditos: 4, requisitos: ["MDE225"] }
        ]
      },

      // A√±o 3
      {
        periodo: "9. Per√≠odo 9",
        anio: 3,
        clases: [
          { codigo: "ING109/EIEB1", nombre: "Ingl√©s 5 / Electiva de idioma extranjero 1", creditos: 3, requisitos: ["ING108/EIEA4"] },
          { codigo: "MDE315", nombre: "Salud infantil y del adolescente", creditos: 5, requisitos: [] },
          { codigo: "MDE316", nombre: "Salud de la mujer", creditos: 5, requisitos: [] },
          { codigo: "MDE317", nombre: "Cl√≠nica integrada 1", creditos: 3, requisitos: [] }
        ]
      },
      {
        periodo: "10. Per√≠odo 10",
        anio: 3,
        clases: [
          { codigo: "ING110/EIEB2", nombre: "Ingl√©s 6 / Electiva de idioma extranjero 2", creditos: 3, requisitos: ["ING109/EIEB1"] },
          { codigo: "MDE318", nombre: "Sistemas de salud", creditos: 4, requisitos: [] },
          { codigo: "MDE319", nombre: "Salud del adulto", creditos: 5, requisitos: [] },
          { codigo: "MDE320", nombre: "Cl√≠nica integrada 2", creditos: 3, requisitos: ["MDE317"] }
        ]
      },
      {
        periodo: "11. Per√≠odo 11",
        anio: 3,
        clases: [
          { codigo: "ING111/EIEB3", nombre: "Ingl√©s 7 / Electiva de idioma extranjero 3", creditos: 3, requisitos: ["ING110/EIEB2"] },
          { codigo: "MDE321", nombre: "Prevenci√≥n y promoci√≥n de la salud 1", creditos: 4, requisitos: [] },
          { codigo: "MDE322", nombre: "Salud del adulto mayor", creditos: 5, requisitos: [] },
          { codigo: "MDE323", nombre: "Cl√≠nica integrada 3", creditos: 3, requisitos: ["MDE320"] }
        ]
      },
      {
        periodo: "12. Per√≠odo 12",
        anio: 3,
        clases: [
          { codigo: "ING112/EIEB4", nombre: "Ingl√©s 8 / Electiva de idioma extranjero 4", creditos: 3, requisitos: ["ING111/EIEB3"] },
          { codigo: "MDE324", nombre: "Prevenci√≥n y promoci√≥n de la salud 2", creditos: 4, requisitos: ["MDE321"] },
          { codigo: "MDE325", nombre: "Salud mental", creditos: 5, requisitos: [] },
          { codigo: "MDE326", nombre: "Cl√≠nica integrada 4", creditos: 3, requisitos: ["MDE323"] }
        ]
      },

      // A√±o 4
      {
        periodo: "13. Per√≠odo 13",
        anio: 4,
        clases: [
          { codigo: "LCC104", nombre: "Ofim√°tica avanzada", creditos: 2, requisitos: [] },
          { codigo: "MDE407", nombre: "Medicina interna 1", creditos: 5, requisitos: [] },
          { codigo: "MDE408", nombre: "Pediatr√≠a 1", creditos: 5, requisitos: [] },
          { codigo: "BMD429", nombre: "Tecnolog√≠as biom√©dicas 1", creditos: 3, requisitos: [] }
        ]
      },
      {
        periodo: "14. Per√≠odo 14",
        anio: 4,
        clases: [
          { codigo: "SOC101", nombre: "Sociolog√≠a", creditos: 3, requisitos: [] },
          { codigo: "MDE409", nombre: "Cirug√≠a 1", creditos: 5, requisitos: [] },
          { codigo: "MDE410", nombre: "Ginecolog√≠a y obstetricia 1", creditos: 5, requisitos: [] }
        ]
      },
      {
        periodo: "15. Per√≠odo 15",
        anio: 4,
        clases: [
          { codigo: "FIL101", nombre: "Filosof√≠a", creditos: 3, requisitos: [] },
          { codigo: "MDE411", nombre: "Urgencias y emergencias 1", creditos: 5, requisitos: [] },
          { codigo: "MDE412", nombre: "Seminarios integradores 1", creditos: 3, requisitos: [] }
        ]
      },
      {
        periodo: "16. Per√≠odo 16",
        anio: 4,
        clases: [
          { codigo: "MDE208", nombre: "Metodolog√≠a de investigaci√≥n", creditos: 3, requisitos: [] },
          { codigo: "MDE413", nombre: "Temas avanzados en pr√°ctica m√©dica 1", creditos: 4, requisitos: [] },
          { codigo: "MDE414", nombre: "Medicina alternativa y complementaria", creditos: 4, requisitos: [] }
        ]
      },

      // A√±o 5
      {
        periodo: "17. Per√≠odo 17",
        anio: 5,
        clases: [
          { codigo: "HIS101", nombre: "Historia de Honduras", creditos: 3, requisitos: [] },
          { codigo: "MDE508", nombre: "Medicina interna 2", creditos: 5, requisitos: ["MDE407"] },
          { codigo: "MDE509", nombre: "Pediatr√≠a 2", creditos: 5, requisitos: ["MDE408"] },
          { codigo: "BMD430", nombre: "Tecnolog√≠as biom√©dicas 2", creditos: 3, requisitos: ["BMD429"] }
        ]
      },
      {
        periodo: "18. Per√≠odo 18",
        anio: 5,
        clases: [
          { codigo: "ART/DEP", nombre: "Electiva arte / deporte", creditos: 3, requisitos: [] },
          { codigo: "MDE510", nombre: "Cirug√≠a 2", creditos: 5, requisitos: ["MDE409"] },
          { codigo: "MDE511", nombre: "Ginecolog√≠a y obstetricia 2", creditos: 5, requisitos: ["MDE410"] }
        ]
      },
      {
        periodo: "19. Per√≠odo 19",
        anio: 5,
        clases: [
          { codigo: "MDE212", nombre: "Generaci√≥n de empresas en salud", creditos: 3, requisitos: ["MDE208"] },
          { codigo: "MDE512", nombre: "Urgencias y emergencias 2", creditos: 5, requisitos: ["MDE411"] },
          { codigo: "MDE513", nombre: "Seminarios integradores 2", creditos: 3, requisitos: ["MDE412"] }
        ]
      },
      {
        periodo: "20. Per√≠odo 20",
        anio: 5,
        clases: [
          { codigo: "MDE304", nombre: "Gesti√≥n de servicios en salud", creditos: 3, requisitos: ["MDE212"] },
          { codigo: "MDE514", nombre: "Temas avanzados en pr√°ctica m√©dica 2", creditos: 4, requisitos: ["MDE413"] },
          { codigo: "MDE515", nombre: "Cuidados paliativos y de hospicio", creditos: 4, requisitos: [] }
        ]
      },

      // A√±o 6
      {
        periodo: "21. Per√≠odo 21",
        anio: 6,
        clases: [
          { codigo: "MDE605", nombre: "Internado ginecoobstetricia", creditos: 16, requisitos: ["ALL"] }
        ]
      },
      {
        periodo: "22. Per√≠odo 22",
        anio: 6,
        clases: [
          { codigo: "MDE606", nombre: "Internado pediatr√≠a", creditos: 16, requisitos: ["ALL"] }
        ]
      },
      {
        periodo: "23. Per√≠odo 23",
        anio: 6,
        clases: [
          { codigo: "MDE607", nombre: "Internado medicina interna", creditos: 16, requisitos: ["ALL"] }
        ]
      },
      {
        periodo: "24. Per√≠odo 24",
        anio: 6,
        clases: [
          { codigo: "MDE608", nombre: "Internado cirug√≠a", creditos: 16, requisitos: ["ALL"] }
        ]
      },

      // A√±o 7
      {
        periodo: "25. Per√≠odo 25",
        anio: 7,
        clases: [
          { codigo: "MDE701", nombre: "Servicio social", creditos: 20, requisitos: ["MDE605", "MDE606", "MDE607", "MDE608"] }
        ]
      }
    ];

    // Im√°genes para cada a√±o
    const imagenesPorAnio = {
      1: "https://thumbs.dreamstime.com/b/icono-de-la-medicina-de-la-banda-de-rodilla-de-la-silueta-del-esquema-del-doodle-estilo-del-vector-ilustraci%C3%B3n-de-la-silueta-del-esquema-del-doodle-176503663.jpg",
      2: "https://cdn-icons-png.flaticon.com/512/2579/2579334.png",
      3: "https://cdn-icons-png.flaticon.com/512/1643/1643888.png",
      4: "https://cdn-icons-png.flaticon.com/512/2757/2757400.png",
      5: "https://cdn-icons-png.flaticon.com/512/2233/2233701.png",
      6: "https://cdn-icons-png.flaticon.com/512/1783/1783567.png",
      7: "https://cdn-icons-png.flaticon.com/512/4306/4306939.png"
    };

    // Guardar y cargar progreso en localStorage
    function cargarProgreso() {
      const datos = localStorage.getItem("mallaProgreso");
      return datos ? JSON.parse(datos) : {};
    }

    function guardarProgreso(progreso) {
      localStorage.setItem("mallaProgreso", JSON.stringify(progreso));
    }

    // Variable global progreso
    let progreso = cargarProgreso();

    // Funci√≥n para verificar si una clase est√° desbloqueada (todos requisitos tachados)
    function estaDesbloqueada(clase) {
      // Caso especial para "ALL" (internados), requieren todos los c√≥digos de las clases completadas:
      if (clase.requisitos.includes("ALL")) {
        // Requiere que todas las clases previas (de todos los a√±os menos el actual) est√©n completadas
        // Para simplificar, aqu√≠ verificamos que todas las clases anteriores est√©n completadas:
        for (const per of clases) {
          for (const c of per.clases) {
            if (c.codigo !== clase.codigo && !progreso[c.codigo]) {
              return false;
            }
          }
        }
        return true;
      }

      // Para requisitos normales:
      for (const req of clase.requisitos) {
        if (!progreso[req]) return false;
      }
      return true;
    }

    // Contar cr√©ditos completados
    function contarCreditos() {
      let suma = 0;
      for (const per of clases) {
        for (const c of per.clases) {
          if (progreso[c.codigo]) suma += c.creditos;
        }
      }
      return suma;
    }

    // Renderizar todo
    function renderizar() {
      const contenedor = document.getElementById("contenedor-malla");
      contenedor.innerHTML = "";

      let anioPrev = null;

      for (const per of clases) {
        // Cuando cambia el a√±o, poner t√≠tulo y la imagen del a√±o
        if (anioPrev !== per.anio) {
          const divImg = document.createElement("div");
          divImg.className = "anio-imagen";
          const img = document.createElement("img");
          img.src = imagenesPorAnio[per.anio];
          img.alt = `A√±o ${per.anio}`;
          divImg.appendChild(img);
          contenedor.appendChild(divImg);

          const tituloAnio = document.createElement("h2");
          tituloAnio.textContent = `A√±o ${per.anio}`;
          contenedor.appendChild(tituloAnio);

          anioPrev = per.anio;
        }

        // Contenedor del periodo
        const divPeriodo = document.createElement("div");
        divPeriodo.className = "periodo";

        const h3Periodo = document.createElement("h3");
        h3Periodo.textContent = per.periodo;
        divPeriodo.appendChild(h3Periodo);

        // Clases del periodo
        for (const clase of per.clases) {
          const divClase = document.createElement("div");
          divClase.className = "clase";

          // Si est√° tachada
          if (progreso[clase.codigo]) divClase.classList.add("completada");

          // Si no est√° desbloqueada y no est√° completada, bloquear
          if (!estaDesbloqueada(clase) && !progreso[clase.codigo]) {
            divClase.classList.add("bloqueada");
          }

          divClase.textContent = `${clase.codigo} - ${clase.nombre} (${clase.creditos} cr√©ditos)`;

          // Evento click: tachar/destachar si est√° desbloqueada o ya completada
          divClase.onclick = () => {
            if (progreso[clase.codigo]) {
              // Destachar sin restricciones
              progreso[clase.codigo] = false;
              delete progreso[clase.codigo];
              guardarProgreso(progreso);
              renderizar();
            } else {
              // Solo tachar si desbloqueada
              if (estaDesbloqueada(clase)) {
                progreso[clase.codigo] = true;
                guardarProgreso(progreso);
                renderizar();
              } else {
                alert("No cumple con los requisitos para desbloquear esta clase.");
              }
            }
          };

          divPeriodo.appendChild(divClase);
        }

        contenedor.appendChild(divPeriodo);
      }

      // Actualizar contador de cr√©ditos
      const uvTotal = document.getElementById("uv-total");
      const totalCreditos = 347;
      uvTotal.textContent = `Cr√©ditos completados: ${contarCreditos()} / ${totalCreditos}`;
    }

    // Reiniciar progreso
    function reiniciar() {
      if (confirm("¬øQuieres reiniciar todo el progreso?")) {
        progreso = {};
        guardarProgreso(progreso);
        renderizar();
      }
    }

    // Inicializar
    renderizar();
  </script>
</body>
</html>
