<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ðŸŽ€ Plan de estudio medicina UNITEC ðŸ©º</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@1,700&display=swap');

    body {
      font-family: 'Comic Neue', cursive;
      background: #fff0f6;
      margin: 0;
      padding: 1rem;
      color: #d6006e;
      background-image: url('https://i.pinimg.com/originals/f9/34/4e/f9344eae6e0f41d765d1a4b17aa77514.jpg');
      background-size: 150px;
      background-repeat: repeat;
    }

    h1, h2 {
      color: #d6006e;
      text-shadow: 1px 1px 2px #fff;
      text-align: center;
    }

    .periodo {
      margin-bottom: 2rem;
    }

    .clase {
      width: 120px;
      height: 120px;
      background: #ffe6f1;
      border: 2px dashed #ff69b4;
      border-radius: 1rem;
      padding: 0.5rem;
      margin: 0.5rem;
      box-shadow: 0 3px 6px rgba(255, 105, 180, 0.3);
      cursor: pointer;
      transition: transform 0.2s;
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 0.75rem;
    }

    .clase:hover {
      transform: scale(1.05);
      background-color: #ffd6ea;
    }

    .completada {
      text-decoration: line-through;
      opacity: 0.5;
      background-color: #fdddf0;
    }

    .bloqueada {
      pointer-events: none;
      opacity: 0.3;
    }

    #uv-total {
      font-size: 1.2rem;
      font-weight: bold;
      margin: 1rem 0;
      color: #cc0077;
      text-align: center;
    }

    button {
      background: #ff69b4;
      color: white;
      border: none;
      border-radius: 1rem;
      padding: 0.6rem 1.2rem;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      box-shadow: 0 2px 5px rgba(255, 20, 147, 0.4);
      display: block;
      margin: 1rem auto;
    }

    button:hover {
      background: #ff1493;
    }

    .hello-kitty {
      text-align: center;
      margin-bottom: 1rem;
    }

    .hello-kitty img {
      max-width: 90px;
      height: auto;
    }
  </style>
</head>
<body>
  <div class="hello-kitty">
    <img id="kitty-img" src="https://i.pinimg.com/originals/0e/e1/91/0ee19199e60c1b21a6faed08cf607236.png" alt="Hello Kitty mÃ©dica">
  </div>

  <h1>ðŸŽ€ Plan de estudio medicina UNITEC ðŸ©º</h1>
  <div id="uv-total">CrÃ©ditos completados: 0 / 347</div>
  <button onclick="reiniciar()">Reiniciar progreso</button>
  <div id="contenedor-malla"></div>
<script>
  const clases = [
    {
      periodo: "1. PerÃ­odo 1",
      anio: 1,
      clases: [
        { codigo: "MAT101", nombre: "IntroducciÃ³n al Ã¡lgebra", creditos: 4, requisitos: [] },
        { codigo: "MDE109", nombre: "Desarrollo humano y social", creditos: 4, requisitos: [] },
        { codigo: "MDE110", nombre: "Procesos celulares y moleculares 1", creditos: 3, requisitos: [] },
        { codigo: "MDE111", nombre: "Estructura y funciÃ³n 1", creditos: 4, requisitos: [] }
      ]
    },
    {
      periodo: "2. PerÃ­odo 2",
      anio: 1,
      clases: [
        { codigo: "MAT102", nombre: "Ãlgebra", creditos: 4, requisitos: ["MAT101"] },
        { codigo: "MDE112", nombre: "Estilo de vida, salud y medio ambiente", creditos: 4, requisitos: [] },
        { codigo: "MDE113", nombre: "Procesos celulares y moleculares 2", creditos: 3, requisitos: ["MDE110"] },
        { codigo: "MDE114", nombre: "Estructura y funciÃ³n 2", creditos: 4, requisitos: ["MDE111"] }
      ]
    },
    {
      periodo: "3. PerÃ­odo 3",
      anio: 2,
      clases: [
        { codigo: "MDE115", nombre: "Bases de la terapÃ©utica medicamentosa", creditos: 4, requisitos: ["MDE113"] },
        { codigo: "MDE116", nombre: "Procesos celulares y moleculares 3", creditos: 3, requisitos: ["MDE113"] },
        { codigo: "MDE117", nombre: "SO 1 - CirculaciÃ³n, respiraciÃ³n, excreciÃ³n y equilibrio Ã¡cido-bÃ¡sico 1", creditos: 4, requisitos: ["MDE114"] },
        { codigo: "MDE203", nombre: "PrÃ¡cticas mÃ©dicas 1", creditos: 4, requisitos: ["MDE113", "MDE114"] }
      ]
    }
    // Puedes seguir agregando mÃ¡s perÃ­odos y aÃ±os con el mismo formato...
  ];

  const imagenesPorAnio = {
    1: "https://i.pinimg.com/originals/0e/e1/91/0ee19199e60c1b21a6faed08cf607236.png",
    2: "https://i.pinimg.com/originals/8f/36/00/8f36009395b948bbed8f9586d2b5be3c.png",
    3: "https://i.pinimg.com/originals/0b/c5/10/0bc5107a0a9f1ee16f0e5f5c9cf39c31.png",
    4: "https://i.pinimg.com/originals/c7/97/e6/c797e6bfa417c84a9b27cdba4bb79d9a.png",
    5: "https://i.pinimg.com/originals/5b/3f/89/5b3f89c68c4a142c6c780593319ebee4.png",
    6: "https://i.pinimg.com/originals/0f/e7/30/0fe730e327b5abbd78d8db89c51b2e4e.png",
    7: "https://i.pinimg.com/originals/1b/9f/03/1b9f03cf350f69ef96be11e5d87971f0.png"
  };

  const progreso = JSON.parse(localStorage.getItem("progreso-malla")) || {};
  const contenedor = document.getElementById("contenedor-malla");
  const kittyImg = document.getElementById("kitty-img");
  const creditosTotales = 347;
  function guardarProgreso() {
    localStorage.setItem("progreso-malla", JSON.stringify(progreso));
  }

  function calcularCreditos() {
    let total = 0;
    for (const codigo in progreso) {
      if (progreso[codigo]) {
        const clase = encontrarClasePorCodigo(codigo);
        if (clase) total += clase.creditos;
      }
    }
    document.getElementById("uv-total").textContent = `CrÃ©ditos completados: ${total} / ${creditosTotales}`;
  }

  function encontrarClasePorCodigo(codigo) {
    for (const periodo of clases) {
      for (const clase of periodo.clases) {
        if (clase.codigo === codigo) return clase;
      }
    }
    return null;
  }

  function requisitosCumplidos(requisitos) {
    if (!requisitos || requisitos.length === 0) return true;
    if (requisitos.includes("ALL")) {
      return clases.every(periodo =>
        periodo.clases.every(clase => progreso[clase.codigo])
      );
    }
    return requisitos.every(req => progreso[req]);
  }

  function renderizar() {
    contenedor.innerHTML = "";
    let ultimoAnio = null;

    clases.forEach(periodo => {
      if (periodo.anio !== ultimoAnio) {
        // Cambiar imagen de Hello Kitty por aÃ±o
        kittyImg.src = imagenesPorAnio[periodo.anio] || "";
        ultimoAnio = periodo.anio;
      }

      const divPeriodo = document.createElement("div");
      divPeriodo.className = "periodo";
      const h2 = document.createElement("h2");
      h2.textContent = periodo.periodo;
      divPeriodo.appendChild(h2);

      periodo.clases.forEach(clase => {
        const divClase = document.createElement("div");
        divClase.className = "clase";
        divClase.id = clase.codigo;
        divClase.textContent = `${clase.codigo} - ${clase.nombre} (C. ${clase.creditos})`;

        const completada = progreso[clase.codigo];
        const desbloqueada = requisitosCumplidos(clase.requisitos);

        if (completada) divClase.classList.add("completada");
        else if (!desbloqueada) divClase.classList.add("bloqueada");

        divClase.onclick = () => {
          if (!desbloqueada) return;
          progreso[clase.codigo] = !progreso[clase.codigo];
          guardarProgreso();
          renderizar();
        };

        divPeriodo.appendChild(divClase);
      });

      contenedor.appendChild(divPeriodo);
    });

    calcularCreditos();
  }

  function reiniciar() {
    if (confirm("Â¿EstÃ¡s segura de que deseas reiniciar tu progreso?")) {
      localStorage.removeItem("progreso-malla");
      location.reload();
    }
  }

  renderizar();
</script>
